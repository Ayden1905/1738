{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "data":{ "url":"cafes-and-restaurants-with-seating-capacity.csv"
    },
    "width":"container",
    "mark":{"type":"circle"},
    "title":"Cafes and resturants per suburb through the years",
    "transform": [
        {"filter":"industry_anzsic4_description==Cafes and Restaurants"},
        {"aggregate": [
            {"op": "sum","field":"number_of_seats","as":"total_seats"},
            {"op":"count", "as":"cafe_count"}
        ],
        "groupby": ["clue_small_area","census_year"]
    },
    {
        "calculate": "datum.total_seats / datum.cafe_count",
        "as": "avg_seats_to_cafe"
    }
    ],

    "encoding": {
        "x":{
            "field":"census_year",
            "type":"nominal",
            "title":"Suburbs"
        },
        "y":{
            "field":"avg_seats_to_cafe",
            "type":"quantitative",
            "title":"Average seats to cafe"
        },
        "tooltip": [
            {"field":"clue_small_area","title":"Suburb"},
            {"field":"total_seats","title":"Total seats"},
            {"field":"cafe_count","title":"Number of Cafes"}
        ],
        "color":{
            "title":"Suburbs",
            "field":"clue_small_area",
            "type":"nominal",
            "legend":null,
            "scale":{
                "range": [
                    "#006BA4",
                    "#FF800E",
                    "#ABABAB",
                    "#595959",
                    "#5F9ED1",
                    "#C85200",
                    "#898989",
                    "#A2C8EC",
                    "#FFBC79",
                    "#CFCFCF"
                ]
            }
        },
        "size":
        {"title":"Cafe Size",
        "field":"cafe_count",
        "type":"quantitative",
        "scale":{"range":[100,700]}}
        },
        "config": {}
    }



